# define path
SYS_NODE_PATH=/usr/local/node/bin
USER_APP_PATH=$HOME/app/bin
COMPOSER_PATH=$HOME/.composer/vendor/bin

# Use vim as the visual editor
export VISUAL=vim
export EDITOR=$VISUAL
# nvm mirror
export NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/dist
export NODEJS_ORG_MIRROR=https://npm.taobao.org/dist
# PYTHON PATH: Only for macOS
if [ "$system" = "Darwin" ]; then
    export PYTHONPATH=/Library/Python/2.7/site-packages:$PYTHONPATH
fi
# reset PATH
PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/bin/X11:/usr/games
# add global nodejs
test -d $SYS_NODE_PATH && PATH=$SYS_NODE_PATH:$PATH
# add composer path
test -d $COMPOSER_PATH && PATH=$COMPOSER_PATH:$PATH
# add custom bin path
test -d $USER_APP_PATH && PATH=$USER_APP_PATH:$PATH
# add jre path
test -f /etc/jrerc && . /etc/jrerc
# add nvm and local node path
if false && which nvm &> /dev/null;then
    if [ -f $HOME/.node-version ];then
        config_node_version=`cat $HOME/.node-version`
        if [ -n "$config_node_version" ];then
            node_version=$config_node_version
        fi
    else
        installed_latest=`nvm_ls | egrep -v "^(system|N/A)$" | tail -1`
        if [ -n $installed_latest ];then
            node_version=$installed_latest
        fi
    fi
    if [ -n "$node_version" ];then
        node_bin_path=${NVM_DIR}/versions/node/${node_version}/bin
        test -d $node_bin_path && PATH=${NVM_DIR}/versions/node/${node_version}/bin:$PATH
    fi
fi
# make the fuck work
if which thefuck &> /dev/null;then
    eval "$(thefuck --alias)"
fi

# fast set proxy
# functions
set_proxy() {
    if [ ! $1 ]; then
        echo "No give proxy address"
        exit 1
    fi
    export HTTP_PROXY=$1
    export HTTPS_PROXY=$1
    export http_proxy=$1
    export https_proxy=$1
}
unset_proxy() {
    unset HTTP_PROXY
    unset HTTPS_PROXY
    unset http_proxy
    unset https_proxy
}
get_proxy() {
    echo $http_proxy
}

# register virtualenvwrapper
register_venv() {
    source `which virtualenvwrapper.sh`
}
# register virtualenvwrapper with python3
register_venv3() {
    export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3
    export WORKON_HOME=$HOME/.virtualenvs3
    source `which virtualenvwrapper.sh`
}

# Local config
test -f ~/.zshenv.local && source ~/.zshenv.local
